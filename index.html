<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>귀멸의칼날 직장인 성향 테스트</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 30px 0;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .test-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
            transform: translateY(0);
            transition: transform 0.3s ease;
        }

        .test-card:hover {
            transform: translateY(-5px);
        }

        .question-container {
            display: none;
        }

        .question-container.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-header {
            margin-bottom: 25px;
        }

        .question-number {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.3em;
            font-weight: 600;
            line-height: 1.4;
            color: #2c3e50;
        }

        .options {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            background: #e3f2fd;
            border-color: #2196f3;
            transform: scale(1.02);
        }

        .option.selected {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-color: #5a6fd8;
            color: white;
            transform: scale(1.02);
        }

        .option-text {
            font-weight: 500;
            line-height: 1.4;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #5a6fd8, #6a4190);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .progress-bar {
            background: #e9ecef;
            height: 8px;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            background: linear-gradient(135deg, #667eea, #764ba2);
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .result-container {
            display: none;
            text-align: center;
        }

        .result-container.active {
            display: block;
            animation: fadeIn 0.8s ease;
        }

        .result-character {
            font-size: 3em;
            margin: 20px 0;
        }

        .result-title {
            font-size: 2em;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .result-subtitle {
            font-size: 1.3em;
            color: #7f8c8d;
            margin-bottom: 25px;
        }

        .result-description {
            font-size: 1.1em;
            line-height: 1.6;
            color: #34495e;
            text-align: left;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }

        .restart-btn {
            margin-top: 30px;
            padding: 15px 30px;
            font-size: 1.1em;
        }

        .start-screen {
            text-align: center;
        }

        .start-btn {
            padding: 15px 40px;
            font-size: 1.3em;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .test-card {
                padding: 20px;
            }
            
            .question-text {
                font-size: 1.1em;
            }
            
            .option {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🗾 귀멸의칼날 직장인 성향 테스트</h1>
            <p>당신은 어떤 캐릭터의 직장인 스타일인가요?</p>
        </div>

        <div class="test-card">
            <!-- Start Screen -->
            <div class="start-screen" id="startScreen">
                <h2>🏢 직장 생활 속 나의 모습을 찾아보세요!</h2>
                <p style="margin: 20px 0; font-size: 1.1em; color: #666;">15개의 질문을 통해 귀멸의칼날 캐릭터 중 당신과 가장 비슷한 직장인 스타일을 알아보세요.</p>
                <button class="btn btn-primary start-btn" onclick="startTest()">테스트 시작하기</button>
            </div>

            <!-- Progress Bar -->
            <div class="progress-bar" id="progressBar" style="display: none;">
                <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
            </div>

            <!-- Questions -->
            <div id="questionsContainer" style="display: none;">
                <!-- Questions will be dynamically generated -->
            </div>

            <!-- Result Screen -->
            <div class="result-container" id="resultContainer">
                <div class="result-character" id="resultCharacter">🎭</div>
                <div class="result-title" id="resultTitle">결과를 확인하세요!</div>
                <div class="result-subtitle" id="resultSubtitle">당신의 직장인 유형</div>
                <div class="result-description" id="resultDescription">
                    테스트를 완료하시면 결과가 여기에 표시됩니다.
                </div>
                <button class="btn btn-primary restart-btn" onclick="restartTest()">다시 테스트하기</button>
            </div>
        </div>
    </div>

    <script>
        // 캐릭터 데이터
        const characters = {
            tanjiro: {
                name: '카마도 탄지로',
                title: '팀워크의 달인',
                subtitle: '프로젝트 매니저',
                emoji: '🌱',
                description: '당신은 팀워크를 중시하고 모든 구성원을 배려하는 완벽한 프로젝트 매니저입니다. 어려운 상황에서도 포기하지 않는 끈기와 팀원들을 하나로 묶는 특별한 능력을 가지고 있습니다. 갈등 상황에서는 중재자 역할을 하며, 항상 긍정적인 에너지로 팀 분위기를 이끌어갑니다.'
            },
            nezuko: {
                name: '카마도 네즈코',
                title: '묵묵한 지원자',
                subtitle: '백오피스 전문가',
                emoji: '🌸',
                description: '당신은 말보다는 행동으로 보여주는 신뢰할 수 있는 백오피스 전문가입니다. 화려하지 않지만 꼭 필요한 업무를 완벽하게 처리하며, 팀원들이 안심하고 일할 수 있는 든든한 지원을 제공합니다. 조용하지만 강한 의지력으로 어떤 난관도 극복해냅니다.'
            },
            zenitsu: {
                name: '아가츠마 젠이츠',
                title: '완벽주의자',
                subtitle: '품질관리 전문가',
                emoji: '⚡',
                description: '당신은 디테일에 강하고 품질에 대한 높은 기준을 가진 완벽주의자입니다. 평소에는 걱정이 많지만, 중요한 순간에는 놀라운 집중력과 전문성을 발휘합니다. 실수를 용납하지 않는 철저함으로 최고 품질의 결과물을 만들어냅니다.'
            },
            inosuke: {
                name: '하시비라 이노스케',
                title: '도전정신 넘치는',
                subtitle: '영업팀 에이스',
                emoji: '🐗',
                description: '당신은 넘치는 에너지와 도전정신으로 무장한 영업팀의 에이스입니다. 어떤 어려운 고객이라도 정면승부로 돌파하며, 경쟁 상황에서 더욱 빛을 발합니다. 때로는 무모해 보일 수 있지만, 그 열정과 추진력으로 불가능을 가능하게 만듭니다.'
            },
            giyu: {
                name: '토미오카 기유',
                title: '냉철한 분석가',
                subtitle: '전략기획팀장',
                emoji: '🌊',
                description: '당신은 감정에 휘둘리지 않고 냉철하게 상황을 분석하는 전략기획 전문가입니다. 말수는 적지만 핵심을 정확히 파악하고, 논리적이고 체계적인 접근으로 최적의 해결책을 제시합니다. 혼자서도 묵묵히 성과를 만들어내는 독립적인 업무 스타일을 가지고 있습니다.'
            },
            rengoku: {
                name: '렌고쿠 쿄쥬로',
                title: '열정적인 리더',
                subtitle: '팀장',
                emoji: '🔥',
                description: '당신은 불타는 열정으로 팀을 이끄는 천생 리더입니다. 긍정적인 에너지와 강한 신념으로 팀원들에게 영감을 주며, 어려운 상황에서도 희망을 잃지 않습니다. 솔선수범하는 모습으로 팀원들의 존경을 받고, 모든 사람의 성장을 진심으로 응원합니다.'
            },
            tengen: {
                name: '우즈이 텐겐',
                title: '화려한 크리에이터',
                subtitle: '마케팅 디렉터',
                emoji: '💎',
                description: '당신은 창의성과 화려함을 겸비한 마케팅의 달인입니다. 독특하고 임팩트 있는 아이디어로 사람들의 관심을 사로잡으며, 트렌드를 선도하는 감각을 가지고 있습니다. 자신감 넘치는 스타일로 브랜드의 가치를 높이고, 시장에서 차별화된 포지션을 만들어냅니다.'
            },
            shinobu: {
                name: '코쵸 시노부',
                title: '전략적 기획자',
                subtitle: '경영전략팀',
                emoji: '🦋',
                description: '당신은 우아하면서도 날카로운 통찰력을 가진 전략적 사고의 전문가입니다. 겉으로는 부드럽지만 속으로는 치밀하게 계획을 세우며, 상대방의 심리를 정확히 파악하여 최적의 전략을 수립합니다. 복잡한 상황에서도 침착하게 핵심을 찾아내는 능력이 뛰어납니다.'
            },
            muichiro: {
                name: '토키토 무이치로',
                title: '집중력의 달인',
                subtitle: '개발자',
                emoji: '☁️',
                description: '당신은 놀라운 집중력으로 복잡한 문제를 해결하는 개발 전문가입니다. 주변의 소음에 흔들리지 않고 자신만의 세계에서 몰입하여 뛰어난 결과물을 만들어냅니다. 때로는 몽환적으로 보일 수 있지만, 핵심 순간에는 번개 같은 직감과 실행력을 보여줍니다.'
            },
            mitsuri: {
                name: '칸로지 미츠리',
                title: '소통의 전문가',
                subtitle: '인사팀 매니저',
                emoji: '💕',
                description: '당신은 밝고 따뜻한 성격으로 사람들과의 소통을 즐기는 인사 전문가입니다. 팀원들의 고민을 진심으로 들어주고, 모든 사람이 편안하게 일할 수 있는 환경을 만듭니다. 강한 공감 능력과 포용력으로 조직의 화합을 이끌어내는 특별한 재능을 가지고 있습니다.'
            },
            sanemi: {
                name: '시나즈가와 사네미',
                title: '강인한 실행자',
                subtitle: '현장관리팀장',
                emoji: '💨',
                description: '당신은 거친 외모 뒤에 강한 책임감을 가진 현장 관리의 전문가입니다. 타협하지 않는 원칙주의자로서 품질과 안전에 대한 기준이 매우 높으며, 어려운 상황에서도 팀을 보호하기 위해 앞장섭니다. 직설적인 소통 방식이지만 진심어린 배려가 담겨있습니다.'
            },
            gyomei: {
                name: '히메지마 교메이',
                title: '신중한 관리자',
                subtitle: '운영총괄임원',
                emoji: '🏔️',
                description: '당신은 깊은 경험과 통찰력을 바탕으로 조직 전체를 관리하는 운영 총괄 전문가입니다. 신중하고 사려깊은 판단으로 큰 그림을 그리며, 모든 결정에 책임을 집니다. 팀원들에게는 든든한 버팀목이 되어주며, 위기 상황에서도 흔들리지 않는 안정감을 제공합니다.'
            },
            muzan: {
                name: '키부츠지 무잔',
                title: '절대적 권력자',
                subtitle: 'CEO',
                emoji: '👑',
                description: '당신은 카리스마와 강력한 리더십으로 조직을 이끄는 최고경영자입니다. 높은 기준과 완벽을 추구하며, 결과에 대한 책임을 철저히 집니다. 때로는 냉혹해 보일 수 있지만, 조직의 성공을 위해서는 어떤 어려운 결정도 내릴 수 있는 강한 의지력을 가지고 있습니다.'
            },
            akaza: {
                name: '아카자',
                title: '성과주의자',
                subtitle: '영업총괄',
                emoji: '👊',
                description: '당신은 끝없는 성장 욕구와 경쟁심으로 무장한 영업 총괄 전문가입니다. 목표 달성에 대한 집착이 강하며, 자신과 팀의 한계를 뛰어넘기 위해 끊임없이 노력합니다. 강한 실적 압박 속에서도 더 높은 성과를 향해 전진하는 불굴의 정신력을 가지고 있습니다.'
            }
        };

        // 질문 데이터
        const questions = [
            {
                question: "새로운 프로젝트가 시작될 때 당신의 첫 번째 행동은?",
                options: [
                    { text: "팀원들과 회의를 소집해서 의견을 나눈다", points: { tanjiro: 3, mitsuri: 2, rengoku: 1 } },
                    { text: "프로젝트 계획을 철저히 분석하고 검토한다", points: { giyu: 3, shinobu: 2, gyomei: 1 } },
                    { text: "일단 시작해보면서 문제를 해결해 나간다", points: { inosuke: 3, akaza: 2, sanemi: 1 } },
                    { text: "나에게 주어진 역할을 정확히 파악한다", points: { nezuko: 3, muichiro: 2, zenitsu: 1 } }
                ]
            },
            {
                question: "업무 스트레스를 받을 때 어떻게 대처하시나요?",
                options: [
                    { text: "동료들과 이야기하며 함께 해결책을 찾는다", points: { mitsuri: 3, tanjiro: 2, rengoku: 1 } },
                    { text: "혼자 조용히 생각하며 차근차근 정리한다", points: { giyu: 3, muichiro: 2, nezuko: 1 } },
                    { text: "더 열심히 일해서 스트레스를 극복한다", points: { rengoku: 3, akaza: 2, sanemi: 1 } },
                    { text: "완벽하게 처리하기 위해 더 신중해진다", points: { zenitsu: 3, shinobu: 2, gyomei: 1 } }
                ]
            },
            {
                question: "팀 미팅에서 당신의 역할은?",
                options: [
                    { text: "적극적으로 의견을 제시하고 토론을 이끈다", points: { inosuke: 3, tengen: 2, muzan: 1 } },
                    { text: "다른 사람들의 의견을 들으며 조율한다", points: { tanjiro: 3, mitsuri: 2, gyomei: 1 } },
                    { text: "핵심적인 의견만 간결하게 전달한다", points: { giyu: 3, muichiro: 2, shinobu: 1 } },
                    { text: "필요한 자료와 정보를 정확히 준비해서 지원한다", points: { nezuko: 3, zenitsu: 2, sanemi: 1 } }
                ]
            },
            {
                question: "실수했을 때 당신의 반응은?",
                options: [
                    { text: "솔직하게 인정하고 팀원들에게 도움을 요청한다", points: { tanjiro: 3, mitsuri: 2, rengoku: 1 } },
                    { text: "조용히 혼자서 문제를 해결하려고 노력한다", points: { giyu: 3, nezuko: 2, muichiro: 1 } },
                    { text: "더 강하게 반발하며 다시 도전한다", points: { inosuke: 3, akaza: 2, sanemi: 1 } },
                    { text: "철저히 분석해서 같은 실수를 반복하지 않도록 한다", points: { zenitsu: 3, shinobu: 2, gyomei: 1 } }
                ]
            },
            {
                question: "업무 우선순위를 정할 때 가장 중요하게 생각하는 것은?",
                options: [
                    { text: "팀 전체의 목표와 일치하는지", points: { tanjiro: 3, rengoku: 2, gyomei: 1 } },
                    { text: "논리적이고 효율적인 순서인지", points: { giyu: 3, shinobu: 2, muichiro: 1 } },
                    { text: "임팩트가 크고 도전적인 일인지", points: { inosuke: 3, tengen: 2, akaza: 1 } },
                    { text: "완벽하게 처리할 수 있는 일인지", points: { zenitsu: 3, nezuko: 2, sanemi: 1 } }
                ]
            },
            {
                question: "새로운 아이디어를 제안할 때 당신의 스타일은?",
                options: [
                    { text: "팀원들과 충분히 논의한 후 함께 발전시킨다", points: { tanjiro: 3, mitsuri: 2, gyomei: 1 } },
                    { text: "데이터와 근거를 바탕으로 논리적으로 설명한다", points: { giyu: 3, shinobu: 2, zenitsu: 1 } },
                    { text: "과감하고 창의적인 아이디어로 어필한다", points: { tengen: 3, inosuke: 2, rengoku: 1 } },
                    { text: "실현 가능성을 철저히 검토한 후 제안한다", points: { nezuko: 3, gyomei: 2, muichiro: 1 } }
                ]
            },
            {
                question: "갈등 상황에서 당신의 대처법은?",
                options: [
                    { text: "양쪽의 입장을 들어보고 중재한다", points: { tanjiro: 3, mitsuri: 2, gyomei: 1 } },
                    { text: "객관적인 사실에 근거해서 판단한다", points: { giyu: 3, shinobu: 2, muichiro: 1 } },
                    { text: "직설적으로 문제의 핵심을 짚어낸다", points: { sanemi: 3, inosuke: 2, muzan: 1 } },
                    { text: "조용히 지켜보며 상황을 파악한다", points: { nezuko: 3, zenitsu: 2, akaza: 1 } }
                ]
            },
            {
                question: "업무 환경으로 어느 것을 선호하시나요?",
                options: [
                    { text: "활발한 소통이 있는 오픈된 공간", points: { mitsuri: 3, tanjiro: 2, rengoku: 1 } },
                    { text: "조용하고 집중할 수 있는 개인 공간", points: { muichiro: 3, giyu: 2, nezuko: 1 } },
                    { text: "역동적이고 변화가 많은 환경", points: { inosuke: 3, tengen: 2, akaza: 1 } },
                    { text: "체계적이고 안정적인 환경", points: { zenitsu: 3, gyomei: 2, shinobu: 1 } }
                ]
            },
            {
                question: "성과 평가 시즌, 당신의 목표 설정 방식은?",
                options: [
                    { text: "팀 전체의 성공을 위한 목표를 세운다", points: { tanjiro: 3, rengoku: 2, mitsuri: 1 } },
                    { text: "현실적이고 달성 가능한 목표를 설정한다", points: { giyu: 3, nezuko: 2, gyomei: 1 } },
                    { text: "도전적이고 야심찬 목표를 설정한다", points: { akaza: 3, inosuke: 2, muzan: 1 } },
                    { text: "완벽하게 달성할 수 있는 확실한 목표를 세운다", points: { zenitsu: 3, shinobu: 2, sanemi: 1 } }
                ]
            },
            {
                question: "후배나 신입사원을 지도할 때 당신의 방식은?",
                options: [
                    { text: "따뜻하게 격려하며 함께 성장한다", points: { rengoku: 3, mitsuri: 2, tanjiro: 1 } },
                    { text: "체계적으로 단계별로 가르친다", points: { gyomei: 3, giyu: 2, shinobu: 1 } },
                    { text: "실전 경험을 통해 빠르게 성장하도록 한다", points: { sanemi: 3, inosuke: 2, muzan: 1 } },
                    { text: "정확한 업무 방법을 꼼꼼히 알려준다", points: { zenitsu: 3, nezuko: 2, muichiro: 1 } }
                ]
            },
            {
                question: "중요한 프레젠테이션을 준비할 때 당신의 접근법은?",
                options: [
                    { text: "청중의 입장에서 이해하기 쉽게 구성한다", points: { tanjiro: 3, mitsuri: 2, rengoku: 1 } },
                    { text: "데이터와 논리를 바탕으로 완벽하게 준비한다", points: { giyu: 3, shinobu: 2, zenitsu: 1 } },
                    { text: "임팩트 있고 기억에 남을 내용으로 구성한다", points: { tengen: 3, inosuke: 2, muzan: 1 } },
                    { text: "핵심 메시지에 집중해서 간결하게 정리한다", points: { muichiro: 3, nezuko: 2, gyomei: 1 } }
                ]
            },
            {
                question: "업무 관련 학습과 성장에 대한 당신의 태도는?",
                options: [
                    { text: "동료들과 함께 서로 배우며 성장한다", points: { tanjiro: 3, mitsuri: 2, rengoku: 1 } },
                    { text: "체계적인 계획을 세워 꾸준히 학습한다", points: { gyomei: 3, shinobu: 2, giyu: 1 } },
                    { text: "실무에서 부딪히며 빠르게 익힌다", points: { inosuke: 3, akaza: 2, sanemi: 1 } },
                    { text: "전문성을 깊이 있게 파고든다", points: { muichiro: 3, zenitsu: 2, nezuko: 1 } }
                ]
            },
            {
                question: "마감일이 임박한 상황에서 당신의 대처법은?",
                options: [
                    { text: "팀원들과 역할을 분담해서 함께 해결한다", points: { tanjiro: 3, rengoku: 2, mitsuri: 1 } },
                    { text: "우선순위를 정리하고 효율적으로 처리한다", points: { giyu: 3, shinobu: 2, gyomei: 1 } },
                    { text: "집중력을 최대한 발휘해서 몰입한다", points: { muichiro: 3, zenitsu: 2, akaza: 1 } },
                    { text: "끝까지 포기하지 않고 완주한다", points: { sanemi: 3, inosuke: 2, nezuko: 1 } }
                ]
            },
            {
                question: "회사 내에서 당신이 가장 중요하게 생각하는 가치는?",
                options: [
                    { text: "팀워크와 상호 협력", points: { tanjiro: 3, mitsuri: 2, rengoku: 1 } },
                    { text: "전문성과 업무 품질", points: { zenitsu: 3, giyu: 2, muichiro: 1 } },
                    { text: "도전정신과 성과 창출", points: { akaza: 3, inosuke: 2, tengen: 1 } },
                    { text: "신뢰성과 책임감", points: { gyomei: 3, nezuko: 2, sanemi: 1 } }
                ]
            },
            {
                question: "이상적인 리더십 스타일이라고 생각하는 것은?",
                options: [
                    { text: "구성원 모두를 배려하며 함께 이끄는 리더", points: { tanjiro: 3, mitsuri: 2, rengoku: 1 } },
                    { text: "전략적 사고로 방향을 제시하는 리더", points: { shinobu: 3, giyu: 2, gyomei: 1 } },
                    { text: "강력한 카리스마로 조직을 이끄는 리더", points: { muzan: 3, rengoku: 2, akaza: 1 } },
                    { text: "전문성을 바탕으로 신뢰받는 리더", points: { gyomei: 3, zenitsu: 2, sanemi: 1 } }
                ]
            }
        ];

        let currentQuestion = 0;
        let answers = {};
        let scores = {};

        // 점수 초기화
        Object.keys(characters).forEach(char => {
            scores[char] = 0;
        });

        function startTest() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('progressBar').style.display = 'block';
            document.getElementById('questionsContainer').style.display = 'block';
            
            renderQuestion();
        }

        function renderQuestion() {
            const container = document.getElementById('questionsContainer');
            const question = questions[currentQuestion];
            
            container.innerHTML = `
                <div class="question-container active">
                    <div class="question-header">
                        <div class="question-number">질문 ${currentQuestion + 1} / ${questions.length}</div>
                        <div class="question-text">${question.question}</div>
                    </div>
                    <div class="options" id="options">
                        ${question.options.map((option, index) => 
                            `<div class="option" onclick="selectOption(${index})" data-index="${index}">
                                <div class="option-text">${option.text}</div>
                            </div>`
                        ).join('')}
                    </div>
                    <div class="navigation">
                        <button class="btn btn-secondary" onclick="previousQuestion()" 
                                ${currentQuestion === 0 ? 'disabled' : ''}>이전</button>
                        <button class="btn btn-primary" onclick="nextQuestion()" 
                                id="nextBtn" disabled>다음</button>
                    </div>
                </div>
            `;
            
            // 이전 답변 복원
            if (answers[currentQuestion] !== undefined) {
                const selectedOption = document.querySelector(`[data-index="${answers[currentQuestion]}"]`);
                if (selectedOption) {
                    selectedOption.classList.add('selected');
                    document.getElementById('nextBtn').disabled = false;
                }
            }
            
            updateProgressBar();
        }

        function selectOption(index) {
            // 기존 선택 제거
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // 새로운 선택 적용
            document.querySelector(`[data-index="${index}"]`).classList.add('selected');
            
            // 답변 저장
            answers[currentQuestion] = index;
            
            // 다음 버튼 활성화
            document.getElementById('nextBtn').disabled = false;
        }

        function nextQuestion() {
            if (answers[currentQuestion] === undefined) return;
            
            // 점수 계산
            const question = questions[currentQuestion];
            const selectedOption = question.options[answers[currentQuestion]];
            
            Object.entries(selectedOption.points).forEach(([character, points]) => {
                scores[character] += points;
            });
            
            currentQuestion++;
            
            if (currentQuestion < questions.length) {
                renderQuestion();
            } else {
                showResult();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                // 이전 질문의 점수 제거
                const question = questions[currentQuestion - 1];
                const selectedOption = question.options[answers[currentQuestion - 1]];
                
                Object.entries(selectedOption.points).forEach(([character, points]) => {
                    scores[character] -= points;
                });
                
                currentQuestion--;
                renderQuestion();
            }
        }

        function updateProgressBar() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }

        function showResult() {
            // 최고 점수 캐릭터 찾기
            const maxScore = Math.max(...Object.values(scores));
            const resultCharacter = Object.keys(scores).find(char => scores[char] === maxScore);
            const character = characters[resultCharacter];
            
            // 결과 표시
            document.getElementById('questionsContainer').style.display = 'none';
            document.getElementById('progressBar').style.display = 'none';
            
            document.getElementById('resultCharacter').textContent = character.emoji;
            document.getElementById('resultTitle').textContent = character.name;
            document.getElementById('resultSubtitle').textContent = `${character.title} • ${character.subtitle}`;
            document.getElementById('resultDescription').textContent = character.description;
            
            document.getElementById('resultContainer').classList.add('active');
        }

        function restartTest() {
            currentQuestion = 0;
            answers = {};
            scores = {};
            
            // 점수 초기화
            Object.keys(characters).forEach(char => {
                scores[char] = 0;
            });
            
            // 화면 초기화
            document.getElementById('resultContainer').classList.remove('active');
            document.getElementById('startScreen').style.display = 'block';
        }
    </script>
</body>
</html>